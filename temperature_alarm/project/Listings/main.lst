C51 COMPILER V9.59.0.0   MAIN                                                              04/05/2020 23:31:50 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\output\main.obj
COMPILER INVOKED BY: E:\keil51\C51\BIN\C51.EXE ..\user\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\inc;..\user) DEBUG OBJE
                    -CTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(..\output\main.obj)

line level    source

*** WARNING C500 IN LINE 1 OF ..\user\main.c: LICENSE ERROR (R207(3): REGISTRY READ ERROR)

   1          /* DIY Ãû³Æ    : ÎÂ¶È¼ì²â±¨¾¯Æ÷
   2          * ¹¦ÄÜËµÃ÷     : ¢ÙLCD1602ÏÔÊ¾ÎÂ¶ÈÖµ£¬²¢ÇÒ½«ÎÂ¶ÈÖµÍ¨¹ýÍ¨¹ýÀ¶ÑÀ·¢ËÍµ½ÊÖ»ú¡£
   3                           ¢ÚÎÂ¶È³¬¹ýÉÏÏÞ»òÕßµÍÓÚÏÂÏÞ¶¼»á±¨¾¯£¬ÏòÊÖ»ú·¢ËÍ±¨¾¯ÐÅÏ¢¡£
   4                           ¢ÛÍ¨¹ý°´¼ü¿ÉÒÔÉÏÏÂÏÞµÄÎÂ¶ÈÖµ
   5          * ×¢    Òâ     : 
   6          *******************************************************************************/
   7          
   8          #include<reg51.h>
   9          #include"lcd.h"
  10          #include"temp.h"
  11          
  12          uchar CNCHAR[6] = "ÉãÊÏ¶È";
  13          void LcdDisplay(int);
  14          void UsartConfiguration();
  15          
  16          /*******************************************************************************
  17          * º¯ÊýÃû         : main
  18          * º¯Êý¹¦ÄÜ       : Ö÷º¯Êý
  19          * ÊäÈë           : ÎÞ
  20          * Êä³ö           : ÎÞ
  21          *******************************************************************************/
  22          
  23          void main()
  24          {
  25   1        //UsartConfiguration();
  26   1        BtoohInit();
*** WARNING C206 IN LINE 26 OF ..\user\main.c: 'BtoohInit': missing function-prototype
  27   1        LcdInit();       //³õÊ¼»¯LCD1602
  28   1        LcdWriteCom(0x88);   //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  29   1        LcdWriteData('C'); 
  30   1        while(1)
  31   1        {
  32   2          LcdDisplay(Ds18b20ReadTemp());
  33   2        }
  34   1      }
  35          
  36          /*******************************************************************************
  37          * º¯ÊýÃû         : LcdDisplay()
  38          * º¯Êý¹¦ÄÜ       : LCDÏÔÊ¾¶ÁÈ¡µ½µÄÎÂ¶È
  39          * ÊäÈë           : ¶ÁÈ¡µ½µÄÎÂ¶ÈÖµ
  40          * Êä³ö           : ÎÞ
  41          *******************************************************************************/
  42          
  43          void LcdDisplay(int temp)    //lcdÏÔÊ¾
  44          {
  45   1          
  46   1          unsigned char i, datas[] = {0, 0, 0, 0, 0}; //¶¨ÒåÊý×é
  47   1        float tp;  
  48   1        if(temp< 0)           //µ±ÎÂ¶ÈÖµÎª¸ºÊý
  49   1          {
  50   2            LcdWriteCom(0x80);    //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  51   2          SBUF='-';               //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
  52   2          while(!TI);              //µÈ´ý·¢ËÍÊý¾ÝÍê³É
C51 COMPILER V9.59.0.0   MAIN                                                              04/05/2020 23:31:50 PAGE 2   

  53   2          TI=0;            //Çå³ý·¢ËÍÍê³É±êÖ¾Î»
  54   2            LcdWriteData('-');         //ÏÔÊ¾¸º
  55   2          //ÒòÎª¶ÁÈ¡µÄÎÂ¶ÈÊÇÊµ¼ÊÎÂ¶ÈµÄ²¹Âë£¬ËùÒÔ¼õ1£¬ÔÙÈ¡·´Çó³öÔ­Âë
  56   2          temp=temp-1;
  57   2          temp=~temp;
  58   2          tp=temp;
  59   2          temp=tp*0.0625*100+0.5; 
  60   2          //ÁôÁ½¸öÐ¡Êýµã¾Í*100£¬+0.5ÊÇËÄÉáÎåÈë£¬ÒòÎªCÓïÑÔ¸¡µãÊý×ª»»ÎªÕûÐÍµÄÊ±ºò°ÑÐ¡Êýµã
  61   2          //ºóÃæµÄÊý×Ô¶¯È¥µô£¬²»¹ÜÊÇ·ñ´óÓÚ0.5£¬¶ø+0.5Ö®ºó´óÓÚ0.5µÄ¾ÍÊÇ½ø1ÁË£¬Ð¡ÓÚ0.5µÄ¾Í
  62   2          //ËãÓÉÏ0.5£¬»¹ÊÇÔÚÐ¡ÊýµãºóÃæ¡£
  63   2       
  64   2          }
  65   1        else
  66   1          {     
  67   2            LcdWriteCom(0x80);    //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  68   2            LcdWriteData('+');    //ÏÔÊ¾Õý
  69   2          SBUF='+';//½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
  70   2          while(!TI);              //µÈ´ý·¢ËÍÊý¾ÝÍê³É
  71   2          TI=0;            //Çå³ý·¢ËÍÍê³É±êÖ¾Î»
  72   2          tp=temp;//ÒòÎªÊý¾Ý´¦ÀíÓÐÐ¡ÊýµãËùÒÔ½«ÎÂ¶È¸³¸øÒ»¸ö¸¡µãÐÍ±äÁ¿
  73   2          //Èç¹ûÎÂ¶ÈÊÇÕýµÄÄÇÃ´£¬ÄÇÃ´ÕýÊýµÄÔ­Âë¾ÍÊÇ²¹ÂëËü±¾Éí
  74   2          temp=tp*0.0625*100+0.5; 
  75   2          //ÁôÁ½¸öÐ¡Êýµã¾Í*100£¬+0.5ÊÇËÄÉáÎåÈë£¬ÒòÎªCÓïÑÔ¸¡µãÊý×ª»»ÎªÕûÐÍµÄÊ±ºò°ÑÐ¡Êýµã
  76   2          //ºóÃæµÄÊý×Ô¶¯È¥µô£¬²»¹ÜÊÇ·ñ´óÓÚ0.5£¬¶ø+0.5Ö®ºó´óÓÚ0.5µÄ¾ÍÊÇ½ø1ÁË£¬Ð¡ÓÚ0.5µÄ¾Í
  77   2          //Ëã¼ÓÉÏ0.5£¬»¹ÊÇÔÚÐ¡ÊýµãºóÃæ¡£
  78   2        }
  79   1        datas[0] = temp / 10000;
  80   1        datas[1] = temp % 10000 / 1000;
  81   1        datas[2] = temp % 1000 / 100;
  82   1        datas[3] = temp % 100 / 10;
  83   1        datas[4] = temp % 10;
  84   1      
  85   1        LcdWriteCom(0x82);        //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  86   1        LcdWriteData('0'+datas[0]); //°ÙÎ» 
  87   1        SBUF = '0'+datas[0];        //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
  88   1        while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
  89   1        TI = 0;
  90   1        
  91   1        LcdWriteCom(0x83);        //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  92   1        LcdWriteData('0'+datas[1]); //Ê®Î»
  93   1        SBUF = '0'+datas[1];        //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
  94   1        while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
  95   1        TI = 0;
  96   1      
  97   1        LcdWriteCom(0x84);        //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
  98   1        LcdWriteData('0'+datas[2]); //¸öÎ» 
  99   1        SBUF = '0'+datas[2];        //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
 100   1        while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
 101   1        TI = 0;
 102   1      
 103   1        LcdWriteCom(0x85);    //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
 104   1        LcdWriteData('.');    //ÏÔÊ¾ ¡®.¡¯
 105   1        SBUF = '.';             //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
 106   1        while (!TI);      //µÈ´ý·¢ËÍÊý¾ÝÍê³É
 107   1        TI = 0;
 108   1      
 109   1        LcdWriteCom(0x86);        //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
 110   1        LcdWriteData('0'+datas[3]); //ÏÔÊ¾Ð¡Êýµã  
 111   1        SBUF = '0'+datas[3];        //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
 112   1        while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
 113   1        TI = 0;
 114   1      
C51 COMPILER V9.59.0.0   MAIN                                                              04/05/2020 23:31:50 PAGE 3   

 115   1        LcdWriteCom(0x87);        //Ð´µØÖ· 80±íÊ¾³õÊ¼µØÖ·
 116   1        LcdWriteData('0'+datas[4]); //ÏÔÊ¾Ð¡Êýµã 
 117   1        SBUF = '0'+datas[4];        //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
 118   1        while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
 119   1        TI = 0;
 120   1        for(i=0; i<6; i++)
 121   1        {
 122   2          SBUF = CNCHAR[i];       //½«½ÓÊÕµ½µÄÊý¾Ý·ÅÈëµ½·¢ËÍ¼Ä´æÆ÷
 123   2          while (!TI);          //µÈ´ý·¢ËÍÊý¾ÝÍê³É
 124   2          TI = 0;
 125   2        }
 126   1      
 127   1         
 128   1      }
 129          /*******************************************************************************
 130          * º¯ Êý Ãû         : UsartConfiguration()
 131          * º¯Êý¹¦ÄÜ         : ÉèÖÃ´®¿Ú
 132          * Êä    Èë         : ÎÞ
 133          * Êä    ³ö         : ÎÞ
 134          *******************************************************************************/
 135          
 136          void UsartConfiguration()
 137          {
 138   1        SCON=0X50;      //ÉèÖÃÎª¹¤×÷·½Ê½1
 139   1        TMOD=0X20;      //ÉèÖÃ¼ÆÊýÆ÷¹¤×÷·½Ê½2
 140   1        PCON=0X80;      //²¨ÌØÂÊ¼Ó±¶
 141   1        TH1=0XF3;       //¼ÆÊýÆ÷³õÊ¼ÖµÉèÖÃ£¬×¢Òâ²¨ÌØÂÊÊÇ4800µÄ
 142   1        TL1=0XF3;
 143   1      //  ES=1;           //´ò¿ª½ÓÊÕÖÐ¶Ï
 144   1      //  EA=1;           //´ò¿ª×ÜÖÐ¶Ï
 145   1        TR1=1;          //´ò¿ª¼ÆÊýÆ÷
 146   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    446    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
